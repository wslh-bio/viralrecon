# yaml-language-server: $schema=https://raw.githubusercontent.com/nf-core/modules/master/subworkflows/yaml-schema.json
name: "consensus_qc"
description: Generate consensus quality control
keywords:
  - consensus
  - quality
  - fasta
components:
  - quast
  - pangolin/updatedata
  - pangolin/run
  - nextclade/run
  - plot/base/density
input:
  - consensus:
      description: |
        Fasta file with genome consensus
        Structure: [ val(meta), [ consensus ] ]
  - fasta:
      description: |
        Reference genome fasta file
        Structure: [ path(fasta) ]
  - gff:
      description: |
        GFF file of the reference genome
        Structure: [ path(gff) ]
  - nextclade_db:
      description: |
        Nextclade database to use
        Structure: [ path(nextclade_db) ]
output:
  - quast_results:
      description: |
        Results from Quast quality control on consensus
        Structure: [ val(meta), [ results ] ]
  - quast_tsv:
      type: file
      description: |
        TSV file with Quast results report
        Structure: [ val(meta), [ tsv ] ]
      pattern: "*.{tsv}"
  - pangolin_report:
      type: file
      description: |
        CSV file with pangolin report
        Structure: [ val(meta), [ csv ] ]
      pattern: "*.{csv}"
  - nextclade_report:
      type: file
      description: |
        CSV file with nextclade report
        Structure: [ val(meta), [ csv ] ]
      pattern: "*.{csv}"
  - bases_tsv:
      type: file
      description: |
        TSV file with bases
        Structure: [ val(meta), [ tsv ] ]
      pattern: "*.{tsv}"
  - bases_pdf:
      type: file
      description: |
        PDF file with bases
        Structure: [ val(meta), [ pdf ] ]
      pattern: "*.{pdf}"
  - versions:
      type: file
      description: File containing software versions
      pattern: "versions.yml"
authors:
  - "@drpatelh"
maintainers:
  - "@svarona"
  - "@saramonzon"
